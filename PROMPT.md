Seguiremos con haciendo pruebas extractadas por cada función de uint128_traits.hpp, poniéndoles nombre test_(function name).cpp, y en un archivo tests/uint128_traits_extracted_tests.cpp y pruebas de benchmark en benchmarks/uint128_traits_extracted_benchs.cpp. Los tests y los benchs han de compilarse con los 4 compiladores que llevamos g++ en /c/msys64/ucrt64/bin/ (includes y libs también en /c/msys64/ucrt64), clang en /c/msys64/clang64/bin/ (includes y libs también en /c/msys64/clang64), y con Intel OneApi, en C:\Program Files (x86)\Intel\oneAPI, como con msvc en C:\Program Files\Microsoft Visual Studio\18\Community\. Los benchmarks han de dar tanto tiempos como cilcos de reloj.

Compilo mediante dos scripts: scripts/build_uint128_traits_extracted_tests.bash y scripts/build_uint128_traits_extracted_benchs.bash, que se encuentran en la raíz del proyecto. Actualmente solo tengo un build que hace las dos cosas, pero prefiero separarlos para tener más control. El actual scripts se llama scripts/build_uint128_traits_extracted.bash. Hay que pasarle un argumento (no vale uno por defecto) que es el compilador a usar: intel, msvc, gcc, clang u all. Opcionalmente se le puede pasar un segundo argumento que es el modo de compilación: debug o release (por defecto release).

La estructura general es que los tests se construyen en build/build_tests/[compiler=intel|msvc|gcc|clang]/[mode=debug|release]/. y para los benchmarks en build/build_benchmarks/[compiler=intel|msvc|gcc|clang]/[mode=debug|release]/., los resultados de los benchmarks se colocarán en benchmarks_results/[compiler=intel|msvc|gcc|clang]/[mode=debug|release]/.

Tengo cuatro terminales msys/bash abiertas, uno para cada compilador (gnu g++, llvm clang++, intel icpx/icx, msvc cl). En cada terminal navego a la raíz del proyecto y ejecuto el script de build correspondiente. Necesito otros dos scripts para correr los tests y los benchmarks respectivamente: scripts/check_uint128_traits_extracted_tests.bash y scripts/run_uint128_traits_extracted_benchs.bash. Al igual que los scripts de build, estos scripts reciben como primer argumento el compilador a usar: intel, msvc, gcc, clang u all (no se admite argumento compiler por defecto). Y como segundo argumento opcional el modo de compilación: debug o release (por defecto release).

Las compilaciones con el compilador del intel son especialmente críticas ya que estamos un entorno muy cruzado (msys2 bash + Intel Compiler icpx/icx + STL Visual Studio libs). Hay que asegurarse de que todo enlace y funcione correctamente. Los ejemplos que funcionan son `scripts/build_uint128_limits_extracted_tests.bash intel`, `scripts/build_int128_limits_extracted_tests.bash intel`, `scripts/build_uint128_limits_extracted_benchs.bash intel` y  `scripts/build_int128_limits_extracted_benchs.bash intel`.